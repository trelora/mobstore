<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Overview - MobStore</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Overview";
    var mkdocs_page_input_path = "overview.md";
    var mkdocs_page_url = "/overview/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> MobStore</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Overview</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#overview">Overview</a></li>
                
                    <li><a class="toctree-l4" href="#setup">Setup</a></li>
                
                    <li><a class="toctree-l4" href="#usage">Usage</a></li>
                
                    <li><a class="toctree-l4" href="#use-with-react">Use with React</a></li>
                
            
            </ul>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">MobStore</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Overview</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="overview">Overview</h1>
<h2 id="setup">Setup</h2>
<p>Here's an example where we set up three data stores, each with associations to the other two. Notice that we are very explicit about the associations we set up. Nothing is magic. Only the associations you define are populated.</p>
<pre><code class="javascript">import {MobStore} from 'mobstore';

const postStore = new MobStore({
  collectionName: &quot;posts&quot;,  // the accessor, i.e. `postStore.posts`
  type: &quot;post&quot;,             // this store holds items of the `post` type.
  associations: [
    {
      key: &quot;comments&quot;,      // a post has a `myPost.comments` key
      type: &quot;comment&quot;,      // this association holds items of the `comment` type.
      plural: true,         // it's an array of them, not a single one.
      inverse: {
        key: &quot;post&quot;,        // a comment will have a `myComment.post` key
        plural: false       // optional, false is the default
      }
    },
    {
      key: &quot;author&quot;,
      type: &quot;person&quot;,
      plural: false,
      inverse: {
        key: &quot;post&quot;
      }
    }
  ]
});

const commentStore = new MobStore({
  collectionName: &quot;comments&quot;,
  type: &quot;comment&quot;,
  associations: [
    {
      key: &quot;post&quot;,
      type: &quot;post&quot;,
      inverse: {
        key: &quot;comments&quot;,
        plural: true
      }
    },
    {
      key: &quot;commenter&quot;,
      type: &quot;person&quot;,
      inverse: {
        key: &quot;comments&quot;,
        plural: true
      }
    }
  ]
});

const peopleStore = new MobStore({
  collectionName: &quot;people&quot;,
  type: &quot;person&quot;,
  associations: [
    {
      key: &quot;posts&quot;,
      type: &quot;post&quot;,
      plural: true,
      inverse: {
        key: &quot;author&quot;,
        plural: true
      }
    },
    {
      key: &quot;comments&quot;,
      type: &quot;comment&quot;,
      plural: true,
      inverse: {
        key: &quot;commenter&quot;
      }
    }
  ]
});
</code></pre>

<h2 id="usage">Usage</h2>
<p>Now, we can take some JSON data that we got from the server and inject it into our stores.</p>
<pre><code class="javascript">const dataFromServer = {
  id: 42,
  title: &quot;How to make an app&quot;,
  author: {
    id: 12,
    name: &quot;Mark Twain&quot;
  },
  comments: [
    {
      id: 3,
      text: &quot;This article is great.&quot;,
      commenter: {
        id: 13,
        name: &quot;Aldous Huxley&quot;
      }
    },
    {
      id: 4,
      text: &quot;This article sucks.&quot;,
      commenter: {
        id: 14,
        name: &quot;Jared Diamond&quot;
      }
    }
  ]
}

postStore.inject(dataFromServer);
</code></pre>

<p>Notice that with the single call to <code>.inject</code> with the nested data, we have populated all three stores with their appropriate data, and each has the correct references to all of their associations.</p>
<pre><code class="javascript">postStore.posts
// [ {id:42, title: &quot;How to make an app&quot;, author: {id: 12...}, comments: [...]} ]

peopleStore.people
// [
//   {id:12, name: &quot;Mark Twain&quot;, posts: [...], comments: [...]},
//   {id:13, name: &quot;Aldous Huxley&quot;, posts: [...], comments: [...]},
//   {id:14, name: &quot;Jared Diamond&quot;, posts: [...], comments: [...]},
// ]

commentStore.comments
// [
//   {id: 3, text: &quot;This article is great.&quot;, post: {id: 42,...}, author: {id: 13...}}
//   {id: 4, text: &quot;This article sucks.&quot;, post: {id: 42...}, author: {id: 14...}}
// ]
</code></pre>

<p>All of the references are hooked up like you would expect.</p>
<pre><code class="javascript">peopleStore.people[0].posts[0].comments[0].author
// {id:13, name: &quot;Aldous Huxley&quot;, posts: [...], comments: [...]}
</code></pre>

<h2 id="use-with-react">Use with React</h2>
<p>If you use this data store together with <a href="https://github.com/mobxjs/mobx-react">mobx-react</a>, your React components will automatically re-render when you update your data by injecting more data into any of the stores, or by changing any of the scalar values of your objects.</p>
<pre><code class="javascript">@observer
class PostsContainer extends React.Component {
  render() {
    return (
      &lt;PostsList
        posts={postsStore.posts}
      /&gt;
    );
  }
}

//...


// add a new comment. by including the ids of the associations, they will get hooked up properly.
commentStore.inject({
  id: 5,
  text: &quot;Spam&quot;,
  post: { id: 42},
  author: { id: 12 }
})

//...

// update the author's name. this will show immediately in the UI if the name field is used somewhere.
const mark = peopleStore.people[0]
mark.name = &quot;Twark Main&quot;

</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href=".." class="btn btn-neutral" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href=".." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
    </span>
</div>

</body>
</html>
